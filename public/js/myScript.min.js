const formatter=new FormatMoney;let allUser="",userPilihan="",userPilihanArray=[];function setNavbar(){let e="",t="";null!=auth?(e=`\n        <li>\n            <a href="${BASE_URL}/profile">Profile</a>\n        </li>\n    `,store.has_store?e+=` \n        <li>\n          <a href="${BASE_URL}/toko/${store.store_data.id_toko}">My Store</a>\n        </li>\n        <li>\n        <li>\n            <a href="${BASE_URL}/logout" id="logout-btn">Logout</a>\n        </li>\n      `:e+=`\n        <li>\n          <a href="${BASE_URL}/seller">Open Store</a>\n        </li>\n        <li>\n        <li>\n            <a href="${BASE_URL}/logout" id="logout-btn">Logout</a>\n        </li>\n      `,t=`\n    <li><a href="wishlist.html">Profile</a></li>\n    <li><a href="${BASE_URL}/OurTeam">Team</a></li>\n    `):(e=`\n        <li>\n            <a href="${BASE_URL}/login">Sign In</a>\n        </li>\n        <li>\n            <a href="${BASE_URL}/register">Sign Up</a>\n        </li>\n        `,t=`\n        <li><a href="${BASE_URL}/login">Sign In</a></li>\n        <li><a href="${BASE_URL}/register">Sign Up</a></li>\n        <li><a href="${BASE_URL}/OurTeam">Team</a></li>\n        `),$("#nav-account").html(e),$("#nav-account2").html(e),$("#nav-slide-link").html(t),$("#nav-slide-link2").html(t)}if(setNavbar(),handleLogout(),handleBuyByModal(),$("#homeSectionReadOnly").length>0&&(showAllProduk(),handleDetailProduk(),showBestSeller()),$("#detailSectionReadOnly").length>0){const e=document.querySelector("#idProduk").dataset.idproduk;function validateCheckout(){let e=!0;return""==$("#note").val()?(e=!1,$(".note-validate").html("harus diisi")):$(".note-validate").html(""),""==$("#quantity").val()?(e=!1,$(".quantity-validate").html("harus diisi")):0==$("#quantity").val()?(e=!1,$(".quantity-validate").html("harus lebih dari 0")):$(".quantity-validate").html(""),e}showAllProduk(),handleDetailProduk(),showDetail(e),$("#btn-checkout-detail").click(function(e){e.preventDefault(),validateCheckout()&&checkout($("#idtoko").val(),$("#hargaBarang").val(),$("#namaBarang").val(),$("#userbeli").val(),$("#note").val(),$("#quantity").val(),document.querySelector("#idProduk").dataset.idproduk)})}if($("#sectionOurTeamReadonly").length>0&&$(".WrapperOwl").owlCarousel({margin:20,loop:!0,autoWidth:!0,items:4,autoplay:!0,autoplayTimeout:5e3}),$("#profileSectionReadOnly").length>0&&(showProfile(),getLocation()&&document.getElementById("btn-history").click(),getHistory(),$("#form-update-profile").submit(function(e){e.preventDefault(),updateProfile()}),$("#logout-profile").click(function(e){e.preventDefault(),localStorage.removeItem("token"),localStorage.removeItem("auth_session"),localStorage.removeItem("store"),document.location.href=BASE_URL+"/login"})),$("#searchSectionReadOnly").length>0){const e=document.querySelector("#searchSectionReadOnly").dataset.keyword;searchingNow(e),handleDetailProduk()}let showEditToko=!1,showHistory=!1;if($("#tokoSectionReadOnly").length>0){const e=document.querySelector("#tokoSectionReadOnly").dataset.toko;let t=!1;store.has_store&&store.store_data.id_toko==e&&(t=!0),dashboardToko(e,t),showTokoProduk(e,t),handleDetailProduk(),getHistoryToko(e),document.body.addEventListener("click",function(e){"btn-to-edit"==e.target.getAttribute("id")?(e.preventDefault(),(showEditToko=!showEditToko)?($(".non-update").hide(),$("#update-toko-section").show(),e.target.innerHTML="Back"):($(".non-update").show(),$("#update-toko-section").hide(),e.target.innerHTML="Edit Store")):"btn-to-history"!=e.target.getAttribute("id")&&"btn-to-history"!=e.target.parentNode.getAttribute("id")||(e.preventDefault(),(showHistory=!showHistory)?("btn-to-history"==e.target.getAttribute("id")?e.target.innerHTML="Back":e.target.parentNode.innerHTML="Back",$("#produkToko").hide(),$("#historyToko").show()):("btn-to-history"==e.target.getAttribute("id")?e.target.innerHTML='<i class="fa fa-history"></i>':e.target.parentNode.innerHTML='<i class="fa fa-history"></i>',$("#produkToko").show(),$("#historyToko").hide()))}),handleUpdateToko(),handleDeleteProduk()}if($("#updateProdukSectionReadOnly").length>0){const e=document.getElementById("updateProdukSectionReadOnly").dataset.idproduk;$("#btn-upload-produk").attr("disabled",!0),updateTokoDash(e),$("input[type=radio][name=user_permitted]").change(function(){1==this.value?($("#user_permit").val(allUser),$(".section-search-user").hide()):2==this.value&&($("#user_permit").val(userPilihan),$(".section-search-user").css("display","flex"))}),$("#btn-upload-produk").click(function(e){e.preventDefault();const t=Array.from(document.querySelectorAll(".validation"));let a=!0;t.map((e,t)=>{let o="";""==(o=0==t?e.parentNode.childNodes[3]:e.parentNode.childNodes[3].childNodes[3]).value?(a=!1,o.classList.add("is-invalid"),e.innerHTML="Harus diisi"):(o.classList.add("is-valid"),e.innerHTML="")}),a&&updateProduk()}),document.body.addEventListener("change",function(e){if("main_img"==e.target.getAttribute("id")){const e=document.getElementById("main_img"),t=document.querySelector("#main_img_preview"),a=new FileReader;a.readAsDataURL(e.files[0]),a.onload=function(e){t.src=e.target.result}}else if("other_img"==e.target.getAttribute("id")){const e=document.getElementById("other_img"),t=document.querySelector("#other_img_preview"),a=new FileReader;a.readAsDataURL(e.files[0]),a.onload=function(e){t.src=e.target.result}}}),$("#btn-search-user").click(function(){findUser($("#searchUser").val()),$("#searchUser").val("")}),document.body.addEventListener("click",function(e){if(e.target.classList.contains("btn-delete-user")){const t=e.target.parentNode.parentNode.parentNode,a=e.target.dataset.iduser,o=userPilihanArray.indexOf(parseInt(a));userPilihanArray.splice(o,1);let n="";userPilihanArray.length>0&&userPilihanArray.map((e,t)=>{n+=0==t?e:","+e}),userPilihan=n,$("#user_permit").val(n),t.remove()}})}function updateTokoDash(e){$.ajax({url:BASE_URL_SERVER+"/produk/"+e,method:"GET",success:e=>{e.success?(e.data[0].id_toko!=store.store_data.id_toko&&(window.location.href=BASE_URL+"/toko/"+store.store_data.id_toko),function(e){allUser="all","all"==e?($("#user_permit").val(allUser),$("#btn-upload-produk").attr("disabled",!1)):(userPilihan=e,$("#user_permit").val(e),$("#user_permitted2").attr("checked",!0),$(".section-search-user").css("display","flex"),userPilihan.split(",").map(e=>{userPilihanArray=[...userPilihanArray,parseInt(e)]}),getUsersList(userPilihan.split(",")))}(e.data[0].user_beli),$("#main_img_preview").attr("src",`${BASE_URL_FILE}/uploads/produk/${e.data[0].gambar}`),$("#other_img_preview").attr("src",`${BASE_URL_FILE}/uploads/produk/${e.data[0].gambar_lain}`),$("#img_main_old").val(e.data[0].gambar),$("#img_other_old").val(e.data[0].gambar_lain),$("#NamaProduk").val(e.data[0].nama_produk),$("#hargaProduk").val(e.data[0].harga)):window.location.href=BASE_URL+"/toko/"+store.store.id_toko},error:e=>{null!=e.responseJSON&&(e.responseJSON.success||(window.location.href=BASE_URL+"/toko/"+store.store.id_toko))}})}function getUsersList(e){$.ajax({url:BASE_URL_SERVER+"/allbuyer",dataType:"json",method:"GET",success:function(t){if(t.success){t.data.map(t=>{if(-1!=e.indexOf(t.id_user.toString())){let e=handlerList(t.email,t.id_user,t.username,t.phone);$("#listUsers").append(e)}}),$("#btn-upload-produk").attr("disabled",!1)}},error:function(e){console.log(e)}})}function uploadProduk(){let main_img=document.getElementById("main_img").files[0],other_img=document.getElementById("other_img").files[0],form=new FormData;form.append("gambar",main_img),form.append("gambar_lain",other_img),form.append("nama_produk",$("#NamaProduk").val()),form.append("harga",$("#hargaProduk").val()),form.append("user_beli",$("#user_permit").val()),form.append("id_toko",store.store_data.id_toko),$(".blankLoad").show(),$(".blankLoad").css("display","flex"),document.body.style.overflowY="hidden",$.ajax({url:BASE_URL_SERVER+"/produk/add",data:form,method:"POST",dataType:"json",headers:{Accept:"application/json","X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content"),Authorization:"Bearer "+token},cache:!1,contentType:!1,processData:!1,success:e=>{$(".blankLoad").hide(),document.body.style.overflowY="auto",null!=e.status&&"Token is Expired"==e.status&&errorToken(),e.success&&Swal.fire({title:"<strong>Add Product Successful</strong>",icon:"success",html:'Success Add Product, <a href="'+BASE_URL+"/toko/"+$("#id_toko").val()+">See Product now</a> ",showCloseButton:!1,showCancelButton:!1,allowOutsideClick:!1,focusConfirm:!0,confirmButtonText:'<a href="'+BASE_URL+"/toko/"+store.store_data.id_toko+'" style="color:inherit;text-decoration:none">See Product Now</a>',confirmButtonAriaLabel:"Thumbs up, great!",cancelButtonText:'<i class="fa fa-thumbs-down"></i>',cancelButtonAriaLabel:"Thumbs down"}).then(e=>{e.isConfirmed&&(window.location.href=BASE_URL+"/toko/"+store.store_data.id_toko)})},error:err=>{$(".blankLoad").hide(),document.body.style.overflowY="auto",Toast.fire({icon:"error",title:"Error Upload Produk"}),null!=err.responseJSON.status&&"Token is Expired"==res.status&&errorToken();const error=err.responseJSON;if(null!=error){const keys=Object.keys(error),validation=Array.from(document.querySelectorAll(".validation")),validation_other=document.querySelector(".validation-other");keys.map(key=>{const value=eval("error."+key);"gambar"==key?validation[0].innerHTML=value[0]:"gambar_lain"==key?validation[1].innerHTML=value[0]:"nama_produk"==key?validation[2].innerHTML=value[0]:"harga"==key?validation[3].innerHTML=value[0]:"user_beli"==key?validation_other.innerHTML=value[0]:(validation[0].innerHTML="",validation[1].innerHTML="",validation_other.innerHTML="")})}}})}function updateProduk(){let main_img=document.getElementById("main_img").files,other_img=document.getElementById("other_img").files,form=new FormData;main_img.length>0&&form.append("gambar",main_img[0]),other_img.length>0&&form.append("gambar_lain",other_img[0]),form.append("gambar_old",$("#img_main_old").val()),form.append("gambar_lain_old",$("#img_other_old").val()),form.append("nama_produk",$("#NamaProduk").val()),form.append("harga",$("#hargaProduk").val()),form.append("user_beli",$("#user_permit").val()),form.append("id_toko",store.store_data.id_toko),form.append("id_produk",id_produk),$(".blankLoad").show(),$(".blankLoad").css("display","flex"),document.body.style.overflowY="hidden",$.ajax({url:BASE_URL_SERVER+"/produk/update",data:form,method:"POST",dataType:"json",headers:{Accept:"application/json","X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content"),Authorization:"Bearer "+token},cache:!1,contentType:!1,processData:!1,success:e=>{$(".blankLoad").hide(),document.body.style.overflowY="auto",null!=e.status?"Token is Expired"==e.status?errorToken():Swal.fire({title:"<strong>Update Product Successful</strong>",icon:"success",html:'Success Update Product, <a href="'+BASE_URL+"/toko/"+$("#id_toko").val()+">See Product now</a> ",showCloseButton:!1,showCancelButton:!1,allowOutsideClick:!1,focusConfirm:!0,confirmButtonText:'<a href="'+BASE_URL+"/toko/"+store.store_data.id_produk+'" style="color:inherit;text-decoration:none">See Product Now</a>',confirmButtonAriaLabel:"Thumbs up, great!",cancelButtonText:'<i class="fa fa-thumbs-down"></i>',cancelButtonAriaLabel:"Thumbs down"}).then(e=>{e.isConfirmed&&(window.location.href=BASE_URL+"/toko/"+store.store_data.id_produk)}):Swal.fire({title:"<strong>Update Product Successful</strong>",icon:"success",html:'Success Update Product, <a href="'+BASE_URL+"/toko/"+$("#id_toko").val()+">See Product now</a> ",showCloseButton:!1,showCancelButton:!1,allowOutsideClick:!1,focusConfirm:!0,confirmButtonText:'<a href="'+BASE_URL+"/toko/"+store.store_data.id_toko+'" style="color:inherit;text-decoration:none">See Product Now</a>',confirmButtonAriaLabel:"Thumbs up, great!",cancelButtonText:'<i class="fa fa-thumbs-down"></i>',cancelButtonAriaLabel:"Thumbs down"}).then(e=>{e.isConfirmed&&(window.location.href=BASE_URL+"/toko/"+store.store_data.id_toko)})},error:err=>{Toast.fire({icon:"error",title:"Error Update Produk"}),logout(err);const error=err.responseJSON;if(null!=error){const keys=Object.keys(error),validation=Array.from(document.querySelectorAll(".validation-update")),validation_other=document.querySelector(".validation-other");keys.map(key=>{const value=eval("error."+key);"gambar"==key?validation[0].innerHTML=value[0]:"gambar_lain"==key?validation[1].innerHTML=value[0]:"nama_produk"==key?validation[2].innerHTML=value[0]:"harga"==key?validation[3].innerHTML=value[0]:"user_beli"==key?validation_other.innerHTML=value[0]:(validation[0].innerHTML="",validation[1].innerHTML="",validation_other.innerHTML="")})}}})}function findUser(e){$.ajax({url:BASE_URL_SERVER+"/finduser?phone="+e,dataType:"json",method:"GET",success:function(e){if(e.success){const t=e.data[0].id_user,a=userPilihan.split("").length;if(-1==userPilihanArray.indexOf(t)){userPilihan+=a>0?","+t:t,userPilihanArray=[...userPilihanArray,t];let o=handlerList(e.data[0].email,t,e.data[0].username,e.data[0].phone);$("#listUsers").append(o),$("#user_permit").val(userPilihan),Toast.fire({icon:"success",title:"Tambah Sukses"})}else Toast.fire({icon:"error",title:"Nomor Telepon Sudah di list"})}},error:e=>{const t=e.responseJSON;null!=t&&(t.success||Toast.fire({icon:"error",title:"Nomor Telepon tidak ditemukan"}))}})}function handlerList(e,t,a,o){return`\n  <li class="list-group-item">\n    <div class="row justify-content-between">\n        <div class="col d-flex align-items-center">\n            <span>${a} (${o}) - ${e}</span>\n        </div>\n        <div class="col d-flex align-items-center justify-content-end">\n            <button class="btn btn-danger btn-delete-user text-white" type="button" data-iduser="${t}">\n                hapus\n            </button>\n        </div>\n    </div>\n  </li>\n  `}function showAllProduk(){$.ajax({url:BASE_URL_SERVER+"/produk",type:"GET",success:function(e){let t="";e.success&&(e.data.map(e=>{t+=`\n            <div class="product-default-single-item product-color--golden swiper-slide">\n                <div class="image-box">\n                    <a href="${BASE_URL}/detail/${e.id_produk}" class="image-link">\n                        <img src="${BASE_URL_FILE}/uploads/produk/${e.gambar}" alt="" style="height:250px;">\n                        <img src="${BASE_URL_FILE}/uploads/produk/${e.gambar_lain}" alt="" style="height:250px;">\n                    </a>\n                    <div class="tag">\n                        <span>sale</span>\n                    </div>\n                    <div class="action-link">\n                        <div class="action-link-left">\n                            <a href="" id="showQuickViewProduct" data-bs-toggle="modal" data-bs-target="#modalQuickview" data-idproduk="${e.id_produk}">Buy\n                                Now</a>\n                        </div>\n                    </div>\n                </div>\n                <div class="content">\n                    <div class="content-left">\n                        <h6 class="title"><a href="${BASE_URL}/detail/${e.id_produk}">${e.nama_produk}</a></h6>\n                        <ul class="review-star">\n                            Stock Available\n                        </ul>\n                    </div>\n                    <div class="content-right">\n                        <span class="price">${formatter.toRupiah(e.harga)}</span>\n                    </div>\n\n                </div>\n            </div>\n            `}),$("#produk-all").length>0&&($("#produk-all").html(t),setSlider()))},error:function(e){alert("error"),console.log(e)}})}function setSlider(){new Swiper(".product-default-slider-4grid-2row.swiper-container",{slidesPerView:4,spaceBetween:30,speed:1500,slidesPerColumn:2,slidesPerColumnFill:"row",navigation:{nextEl:".product-slider-default-2rows .swiper-button-next",prevEl:".product-slider-default-2rows .swiper-button-prev"},breakpoints:{0:{slidesPerView:1},576:{slidesPerView:2},768:{slidesPerView:2},992:{slidesPerView:3},1200:{slidesPerView:4}}})}function setSlider1row(){new Swiper(".product-default-slider-4grid-1row.swiper-container",{slidesPerView:4,spaceBetween:30,speed:1500,navigation:{nextEl:".product-slider-default-1row .swiper-button-next",prevEl:".product-slider-default-1row .swiper-button-prev"},breakpoints:{0:{slidesPerView:1},576:{slidesPerView:2},768:{slidesPerView:2},992:{slidesPerView:3},1200:{slidesPerView:4}}})}function setSliderDetail(){var e=new Swiper(".modal-product-image-thumb",{spaceBetween:10,slidesPerView:4,freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});new Swiper(".modal-product-image-large",{thumbs:{swiper:e}})}function handleDetailProduk(){document.body.addEventListener("click",function(e){if("showQuickViewProduct"==e.target.getAttribute("id")){const t=e.target.dataset.idproduk,a=document.querySelector("#quickViewModal1"),o=document.querySelector("#quickViewModal2"),n=a.childNodes[1].childNodes[1],r=a.childNodes[3].childNodes[1],i=o.childNodes[1].childNodes[1],s=o.childNodes[3].childNodes[1];n.setAttribute("src",""),r.setAttribute("src",""),i.setAttribute("src",""),s.setAttribute("src",""),$("#idtokoQuickView").val(""),$("#hargaBarangQuickView").val(""),$("#namaBarangQuickView").val(""),$("#userbeliQuickView").val(""),$.ajax({url:BASE_URL_SERVER+"/produk/"+t,type:"GET",success:function(e){if(e.success){const a=e.data[0];$("#idprodukQuickView").val(t),$("#idtokoQuickView").val(a.id_toko),$("#hargaBarangQuickView").val(a.harga),$("#namaBarangQuickView").val(a.nama_produk),$("#userbeliQuickView").val(a.user_beli),function(e,t,a,o,n){t.setAttribute("src",BASE_URL_FILE+"/uploads/produk/"+e.gambar),a.setAttribute("src",BASE_URL_FILE+"/uploads/produk/"+e.gambar_lain),o.setAttribute("src",BASE_URL_FILE+"/uploads/produk/"+e.gambar),n.setAttribute("src",BASE_URL_FILE+"/uploads/produk/"+e.gambar_lain)}(a,n,r,i,s),$("#detailQuickViewTitle").html(a.nama_produk),$("#detailQuickViewFare").html(formatter.toRupiah(a.harga)),setSliderDetail()}},error:function(){alert("error")}})}})}function showDetail(e){$.ajax({url:BASE_URL_SERVER+"/produk/"+e,type:"GET",success:function(e){if(e.success){const t=e.data[0];$(".titleDetail").html(t.nama_produk),$(".priceDetail").html(formatter.toRupiah(t.harga)),$("#idtoko").val(t.id_toko),$("#hargaBarang").val(t.harga),$("#namaBarang").val(t.nama_produk),$("#userbeli").val(t.user_beli),function(e){$(".imgDetailMain1").attr("src",BASE_URL_FILE+"/uploads/produk/"+e.gambar),$(".imgDetailMain2").attr("src",BASE_URL_FILE+"/uploads/produk/"+e.gambar_lain),$(".imgOtherDetailMain1").attr("src",BASE_URL_FILE+"/uploads/produk/"+e.gambar),$(".imgOtherDetailMain2").attr("src",BASE_URL_FILE+"/uploads/produk/"+e.gambar_lain)}(t)}},error:function(){alert("error")}})}function handleLogout(){document.body.addEventListener("click",function(e){"logout-btn"==e.target.getAttribute("id")&&(e.preventDefault(),localStorage.removeItem("token"),localStorage.removeItem("auth_session"),localStorage.removeItem("store"),document.location.href=BASE_URL+"/login")})}function checkout(e,t,a,o,n,r,i){$(".blankLoad").show(),$(".blankLoad").css("display","flex"),document.body.style.overflowY="hidden";const s=auth.id_user,l=o.split(",");if("all"==o){let o=new Date,s=o.getFullYear()+"-"+(o.getMonth()+1<10?"0":"")+(o.getMonth()+1)+"-"+(o.getDate()+1<10?"0":"")+o.getDate()+" "+o.getHours()+":"+o.getMinutes()+":"+o.getSeconds(),l=new FormData;l.append("id_produk",i),l.append("id_user",auth.id_user),l.append("id_toko",e),l.append("tanggal",s),l.append("deskripsi",n),l.append("total_barang",r),l.append("harga",t),l.append("status",1),l.append("first_name",auth.first_name),l.append("last_name",auth.last_name),l.append("address",auth.address),l.append("city",auth.city),l.append("postal_code",auth.postal_code),l.append("phone",auth.phone),l.append("country_code",auth.country_code),l.append("barang",a),$.ajax({url:BASE_URL_SERVER+"/payment/midtrans",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content"),Authorization:"Bearer "+token},data:l,method:"POST",dataType:"json",cache:!1,contentType:!1,processData:!1,success:e=>{if($("#modalQuickview").modal("hide"),$(".blankLoad").hide(),document.body.style.overflowY="auto",null!=e.status&&errorToken(),1==e.code){Toast.fire({icon:"success",title:"Sukses Memesan Produk, selesaikan pembayaran"});let t="location=yes,height=650,width=520,scrollbars=yes,status=yes",a=e.redirect_url;window.open(a,"_blank",t)}},error:e=>{$(".blankLoad").hide(),document.body.style.overflowY="auto",Toast.fire({icon:"error",title:"Error Pesan Produk"});e.responseJSON;console.log(e.responseText)}})}else if(-1==l.indexOf(s.toString()))$("#modalQuickview").modal("hide"),$(".blankLoad").hide(),document.body.style.overflowY="auto",Swal.fire({icon:"error",title:"Oops...",text:"Kamu tidak diizinkan membeli barang ini!"});else{let o=new Date,i=o.getFullYear()+"-"+(o.getMonth()+1<10?"0":"")+(o.getMonth()+1)+"-"+(o.getDate()+1<10?"0":"")+o.getDate()+" "+o.getHours()+":"+o.getMinutes()+":"+o.getSeconds(),s=new FormData;s.append("id_produk",document.querySelector("#idProduk").dataset.idproduk),s.append("id_user",auth.id_user),s.append("id_toko",e),s.append("tanggal",i),s.append("deskripsi",n),s.append("total_barang",r),s.append("harga",t),s.append("status",1),s.append("first_name",auth.first_name),s.append("last_name",auth.last_name),s.append("address",auth.address),s.append("city",auth.city),s.append("postal_code",auth.postal_code),s.append("phone",auth.phone),s.append("country_code",auth.country_code),s.append("barang",a),$.ajax({url:BASE_URL_SERVER+"/payment/midtrans",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content"),Authorization:"Bearer "+token},data:s,method:"POST",dataType:"json",cache:!1,contentType:!1,processData:!1,success:e=>{if($(".blankLoad").hide(),document.body.style.overflowY="auto",null!=e.status&&"Token is Expired"==e.status&&errorToken(),1==e.code){Toast.fire({icon:"success",title:"Sukses Memesan Produk, selesaikan pembayaran"});let t="location=yes,height=650,width=520,scrollbars=yes,status=yes",a=e.redirect_url;window.open(a,"_blank",t)}},error:e=>{$(".blankLoad").hide(),document.body.style.overflowY="auto",Toast.fire({icon:"error",title:"Error Pesan Produk"});const t=e.responseJSON;console.log(t)}})}}function handleBuyByModal(){$("#btnBuyQuickView").click(function(){(function(){let e=!0;""==$("#noteQuickView").val()?(e=!1,$(".noteQuickView-validate").html("harus diisi")):$(".noteQuickView-validate").html("");""==$("#quantityQuickView").val()?(e=!1,$(".quantityQuickView-validate").html("harus diisi")):0==$("#quantityQuickView").val()?(e=!1,$(".quantityQuickView-validate").html("harus lebih dari 0")):$(".quantityQuickView-validate").html("");return e})()&&(null==auth?notLoginYet():checkout($("#idtokoQuickView").val(),$("#hargaBarangQuickView").val(),$("#namaBarangQuickView").val(),$("#userbeliQuickView").val(),$("#noteQuickView").val(),$("#quantityQuickView").val(),$("#idprodukQuickView").val()))})}function showBestSeller(){$.ajax({url:BASE_URL_SERVER+"/bestproduk",type:"GET",success:function(e){let t="";e.success&&(e.data.map(e=>{t+=`\n            <div class="product-default-single-item product-color--golden swiper-slide">\n                <div class="image-box">\n                    <a href="${BASE_URL}/detail/${e.id_produk}" class="image-link">\n                        <img src="${BASE_URL_FILE}/uploads/produk/${e.gambar}" alt="" style="height:250px;">\n                        <img src="${BASE_URL_FILE}/uploads/produk/${e.gambar_lain}" alt="" style="height:250px;">\n                    </a>\n                    <div class="tag">\n                        <span>sale</span>\n                    </div>\n                    <div class="action-link">\n                        <div class="action-link-left">\n                            <a href="" id="showQuickViewProduct" data-bs-toggle="modal" data-bs-target="#modalQuickview" data-idproduk="${e.id_produk}">Buy\n                                Now</a>\n                        </div>\n                    </div>\n                </div>\n                <div class="content">\n                    <div class="content-left">\n                        <h6 class="title"><a href="${BASE_URL}/detail/${e.id_produk}">${e.nama_produk}</a></h6>\n                        <ul class="review-star">\n                            Stock Available\n                        </ul>\n                    </div>\n                    <div class="content-right">\n                        <span class="price">${formatter.toRupiah(e.harga)}</span>\n                    </div>\n\n                </div>\n            </div>\n            `}),$("#produk-slider").length>0&&($("#produk-slider").html(t),setSlider1row()))},error:function(e){alert("error"),console.log(e)}})}function searchingNow(e){$.ajax({url:BASE_URL_SERVER+"/findproduk?keyword="+e,type:"GET",success:function(e){let t="",a="";e.success&&(e.data.map(e=>{t+=`\n            <div class="col-xl-3 col-lg-4 col-sm-6 col-12">\n              <div class="product-default-single-item product-color--golden swiper-slide">\n                <div class="image-box">\n                    <a href="${BASE_URL}/detail/${e.id_produk}" class="image-link">\n                        <img src="${BASE_URL_FILE}/uploads/produk/${e.gambar}" alt="" style="height:250px;">\n                        <img src="${BASE_URL_FILE}/uploads/produk/${e.gambar_lain}" alt="" style="height:250px;">\n                    </a>\n                    <div class="tag">\n                        <span>sale</span>\n                    </div>\n                    <div class="action-link">\n                        <div class="action-link-left">\n                            <a href="" id="showQuickViewProduct" data-bs-toggle="modal" data-bs-target="#modalQuickview" data-idproduk="${e.id_produk}">Buy\n                                Now</a>\n                        </div>\n                    </div>\n                </div>\n                <div class="content">\n                    <div class="content-left">\n                        <h6 class="title"><a href="${BASE_URL}/detail/${e.id_produk}">${e.nama_produk}</a></h6>\n                        <ul class="review-star">\n                            Stock Available\n                        </ul>\n                    </div>\n                    <div class="content-right">\n                        <span class="price">${formatter.toRupiah(e.harga)}</span>\n                    </div>\n\n                </div>\n            </div>\n            </div>\n            `,a+=`\n          <div class="col-12 mb-3">\n            <div class="product-list-single product-color--golden mb-3">\n                <a href="${BASE_URL}/detail/${e.id_produk}"\n                    class="product-list-img-link">\n                    <img class="img-fluid"\n                        src="${BASE_URL_FILE}/uploads/produk/${e.gambar}"\n                        alt=""\n                        style="width:40vw;">\n                    <img class="img-fluid"\n                        src=\n                        "${BASE_URL_FILE}/uploads/produk/${e.gambar_lain}"\n                        alt=""\n                        style="width:40vw;">\n                </a>\n                <div class="product-list-content">\n                    <h5 class="product-list-link"><a\n                            href="${BASE_URL}/detail/${e.id_produk}">\n                            ${e.nama_produk}\n                            </a></h5>\n                    <span class="product-list-price">\n                    ${formatter.toRupiah(e.harga)}\n                    </span>\n                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit.\n                        Nobis ad, iure incidunt. Ab consequatur temporibus non\n                        eveniet inventore doloremque necessitatibus sed, ducimus\n                        quisquam, ad asperiores</p>\n                    <div class="product-action-icon-link-list">\n                        <a href="#" id="showQuickViewProduct" data-bs-toggle="modal"\n                            data-bs-target="#modalQuickview"\n                            data-idproduk="${e.id_produk}"\n                            class="btn btn-lg btn-black-default-hover">\n                          Buy Now    \n                        </a>\n                    </div>\n                </div>\n          </div>\n          `}),$("#searchResult").length>0&&($("#searchResult").html(t),$("#searchResultFullWidth").html(a)))},error:function(e){e.responseJSON;$("#searchResult").length>0&&($("#searchResult").html(notFound()),$("#searchResultFullWidth").html(notFound()))}})}function notFound(){return`\n  <div class="col-12" style="margin-top: 5rem">\n    <div class="row justify-content-center">\n        <img src="${BASE_URL_FILE}/img/character/INTIP.png" alt=""\n            class="user-select-none" style="width: 500px">\n        <h2 class="text-center">Product Not Found</h2>\n    </div>\n  </div>\n  `}function updateProfile(){$("#btn-save-profile").attr("disabled",!0);let form=new FormData;form.append("username",$("#username-me").val()),form.append("email",auth.email),form.append("first_name",$("#first-name-me").val()),form.append("last_name",$("#last-name-me").val()),form.append("phone",$("#phone-me").val()),form.append("id_user",auth.id_user),form.append("country_code",auth.country_code),form.append("postal_code",$("#postal-code-me").val()),form.append("address",$("#address-me").val()),form.append("city",auth.city),$.ajax({url:BASE_URL_SERVER+"/user/update",type:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content"),Authorization:"Bearer "+token},method:"POST",data:form,dataType:"json",cache:!1,contentType:!1,processData:!1,success:function(e){$("#btn-save-profile").attr("disabled",!1),e.success&&(Toast.fire({icon:"success",title:"Update Profile Sukses"}),localStorage.removeItem("auth_session"),localStorage.setItem("auth_session",JSON.stringify(e.data)),auth=JSON.parse(localStorage.getItem("auth_session")),showProfile())},error:err=>{Toast.fire({icon:"error",title:"Update Profile Error"}),$("#btn-save-profile").attr("disabled",!1);const error=err.responseJSON;if(null!=error){const keys=Object.keys(error),validation=Array.from(document.querySelectorAll(".validation-server-profile"));keys.map(key=>{const value=eval("error."+key);"first_name"==key?($("#first-name-me").addClass("is-invalid"),validation[0].innerHTML=value[0]):"last_name"==key?($("#last-name-me").addClass("is-invalid"),validation[1].innerHTML=value[0]):"postal_code"==key?($("#postal-code-me").addClass("is-invalid"),validation[4].innerHTML=value[0]):"username"==key?($("#username-me").addClass("is-invalid"),validation[2].innerHTML=value[0]):"phone"==key?($("#phone-me").addClass("is-invalid"),validation[3].innerHTML=value[0]):"address"==key?($("#address-me").addClass("is-invalid"),validation[5].innerHTML=value[0]):($("#address-me").removeClass("is-invalid"),$("#phone-me").removeClass("is-invalid"),$("#postal-code-me").removeClass("is-invalid"),$("#username-me").removeClass("is-invalid"),$("#last-name-me").removeClass("is-invalid"),$("#first-name-me").removeClass("is-invalid"),validation[0].innerHTML="",validation[1].innerHTML="",validation[2].innerHTML="",validation[3].innerHTML="",validation[4].innerHTML="",validation[5].innerHTML="")})}}})}function showProfile(){$("#email-me").html(auth.email),$("#first-name-me").val(auth.first_name),$("#last-name-me").val(auth.last_name),$("#username-me").val(auth.username),$("#phone-me").val(auth.phone),$("#postal-code-me").val(auth.postal_code),$("#address-me").val(auth.address)}function getLocation(){return window.location.href.split("?tab=").length>1}function getHistory(){$.ajax({url:BASE_URL_SERVER+"/checkout/user/"+auth.id_user,type:"GET",success:function(e){if(e.success){let t=setHistory(e.data);$("#history-users").html(t)}},error:e=>{console.log(e)}})}function setHistory(e){let t="";return e.map((e,a)=>{t+=`\n    <tr>\n      <td class="product_remove">\n          ${a+1}\n      </td>\n      <td class="product_thumb"><a href="${BASE_URL}/detail/${e.id_produk}"><img\n                  src="${BASE_URL_FILE}/uploads/produk/${e.gambar}"\n                  alt=""></a></td>\n      <td class="product_name"><a href="${BASE_URL}/detail/${e.id_produk}">\n        ${e.nama_produk}\n      </a></td>\n      <td class="product-price">${formatter.toRupiah(e.harga)}</td>\n      <td class="product_stock">${1==e.status?"Paid Off":"Not Paid"}</td>\n    </tr>\n    `}),t}function dashboardToko(e,t){$.ajax({url:BASE_URL_SERVER+`/toko/${e}`,type:"GET",success:function(e){if(e.success){const a=e.data[0];if($("#bgToko").css("background",`url(${BASE_URL_FILE}/uploads/toko/${a.background})`),$("#logoToko").attr("src",`${BASE_URL_FILE}/uploads/toko/${a.logo}`),$("#namaToko").html(a.nama_toko),$("#deskripsiToko").html(nl2br(a.deskripsi)),t){let e=`\n          <div class="ps-block__user-content" id="update-toko-section">\n            <form action="" id="form-update-toko">\n              <div class="row" style="width: 70vw">\n                  <div class="col-md-6">\n                      <div class="row">\n                          <div class="col-12">\n                              <label for="store-name" class="form-label">Store Name</label>\n                              <input type="text" id="store-name" value="${a.nama_toko}"\n                                  class="form-control w-100 bg-white mb-3 p-3">\n                              <small class="validation text-danger edit-toko-content"></small>\n                          </div>\n                      </div>\n                      <div class="row">\n                          <div class="col-12">\n                              <label for="store-deskripsion" class="form-label">Store Deskripsion</label>\n                              <textarea name="" id="store-deskripsion" class="form-control bg-white p-3"\n                                  style="min-height: 150px">${a.deskripsi}</textarea>\n                              <small class="validation text-danger edit-toko-content"></small>\n                          </div>\n                      </div>\n                  </div>\n                  <div class="col-md-6">\n                      <div class="row">\n                          <div class="col-12 mb-3">\n                              <label for="store-logo" class="form-label">Change Logo</label>\n                              <div class="custom-file">\n                                  <input type="file" class="custom-file-input bg-white" id="store-logo" Accept="image/jpg,image/png,image/jpeg">\n                              </div>\n                              <small class="text-danger validation-server"></small>\n                          </div>\n                          <div class="col-12">\n                              <label for="store-bg" class="form-label">Change Background</label>\n                              <div class="custom-file">\n                                  <input type="file" class="custom-file-input bg-white" id="store-bg" Accept="image/jpg,image/png,image/jpeg">\n                              </div>\n                              <small class="text-danger validation-server"></small>\n                          </div>\n                          <div class="col-12 mt-3">\n                              <button class="btn btn-lg btn-black-default-hover" style="width: 200px" type="submit" id="btn-submit-toko">\n                                  Submit\n                              </button>\n                          </div>\n                      </div>\n                  </div>\n              </div>\n            </form>\n        </div>\n          `,t=`\n          <div class="row justify-content-end d-flex w-100">\n            <a href="#" class="btn btn-lg btn-black-default-hover" style="width: 200px" id="btn-to-edit">\n                Edit Store\n            </a>\n            <a href="#" class="btn btn-lg btn-black-default-hover mx-3 mt-3 mt-lg-0" style="width: auto" id="btn-to-history">\n                <i class="fa fa-history"></i>\n            </a>\n            <a href="${BASE_URL}/toko/add" class="btn btn-lg btn-black-default-hover mt-3 mt-lg-0" style="width: auto">\n                <i class="fa fa-plus"></i>\n            </a>\n        </div>\n          `;$("#toko-content").append(e),$("#mystore-content").html(t)}showEditToko=!1,$(".non-update").show(),$("#update-toko-section").hide()}},error:function(e){window.location.href=BASE_URL}})}function showTokoProduk(e,t){$.ajax({url:BASE_URL_SERVER+`/produk/toko/${e}`,type:"GET",success:function(e){if(e.success){let a="",o="";e.data.map(e=>{a+=handleTokoProduk(e,t),o+=handleTokoProduk2(e,t)}),$("#productStore").html(a),$("#productStore2").html(o)}else null!==document.querySelector("#productStore")&&(document.querySelector("#productStore").innerHTML=notFound(),document.querySelector("#productStore2").innerHTML=notFound())},error:function(e){if(null!=e){e.responseJSON.message;null!==document.querySelector("#productStore")&&(document.querySelector("#productStore").innerHTML=notFound(),document.querySelector("#productStore2").innerHTML=notFound())}}})}function handleTokoProduk(e,t){var a;return`\n  <div class="col-xl-3 col-lg-4 col-sm-6 col-12">\n    <div class="product-default-single-item product-color--golden swiper-slide">\n        <div class="image-box">\n            <a href="${BASE_URL}/detail/${e.id_produk}" class="image-link">\n                <img src="${BASE_URL_FILE}/uploads/produk/${e.gambar}"\n                    alt="" style="height:250px;">\n                <img src="${BASE_URL_FILE}/uploads/produk/${e.gambar_lain}"\n                    alt="" style="height:250px;">\n            </a>\n            <div class="tag">\n                <span>sale</span>\n            </div>\n            <div class="action-link">\n                <div class="action-link-left">\n                    <a href="" id="showQuickViewProduct"\n                        data-bs-toggle="modal"\n                        data-bs-target="#modalQuickview" data-idproduk="${e.id_produk}">\n                        Buy\n                        Now</a>\n                </div>\n                ${a=t,a?`\n      <div class="action-link-right">\n        <a href="${BASE_URL}/delete/${e.id_produk}"><i\n                class="fa fa-trash-alt" data-idproduk="${e.id_produk}" id="btn-delete-produk"></i></a>\n        <a href="${BASE_URL}/toko/edit/${e.id_produk}"><i\n                class="fa fa-edit"></i></a>\n    </div>\n      `:""}\n            </div>\n        </div>\n        <div class="content">\n            <div class="content-left">\n                <h6 class="title">\n                  <a href="${BASE_URL}/detail/${e.id_produk}">\n                    ${e.nama_produk}\n                  </a>\n                </h6>\n                <ul class="review-star">\n                    Stock Available\n                </ul>\n            </div>\n            <div class="content-right">\n                <span class="price">${formatter.toRupiah(e.harga)}</span>\n            </div>\n\n        </div>\n    </div>\n  </div>\n  `}function handleTokoProduk2(e,t){var a;return`\n  <div class="col-12">\n    <div class="product-list-single product-color--golden mb-3">\n      <a href="${BASE_URL}/detail/${e.id_produk}" class="product-list-img-link">\n        <img class="img-fluid" src="${BASE_URL_FILE}/uploads/produk/${e.gambar}" alt="" style="width:40vw;">\n        <img class="img-fluid" src="${BASE_URL_FILE}/uploads/produk/${e.gambar_lain}" alt="" style="width:40vw;">\n      </a>\n      <div class="product-list-content">\n        <h5 class="product-list-link">\n          <a href="${BASE_URL}/detail/${e.id_produk}">\n            ${e.nama_produk}\n          </a>\n        </h5>\n        <span class="product-list-price">${formatter.toRupiah(e.harga)}</span>\n        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nobis ad, iure incidunt. Ab consequatur temporibus non eveniet inventore doloremque necessitatibus sed, ducimus quisquam, ad asperiores</p>\n        <div class="product-action-icon-link-list">\n            <a href="#" id="showQuickViewProduct" data-bs-toggle="modal"\n              data-bs-target="#modalQuickview" data-idproduk="${e.id_produk}"\n              class="btn btn-lg btn-black-default-hover">Buy Now</a>\n            ${a=t,a?`\n      <a href="${BASE_URL}/delete/${e.id_produk}" class="btn btn-lg btn-black-default-hover" id="btn-delete-produk-row" data-idproduk="${e.id_produk}">\n        <i class="fa fa-trash-alt"></i>\n      </a>\n      <a href="${BASE_URL}/toko/edit/${e.id_produk}" class="btn btn-lg btn-black-default-hover">\n        <i class="fa fa-edit"></i>\n      </a>\n      `:""}\n        </div>\n      </div>\n    </div>\n  </div>\n  `}function nl2br(e,t){return null==e?"":(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+(t||void 0===t?"<br />":"<br>")+"$2")}function handleUpdateToko(){document.body.addEventListener("change",function(e){if("store-logo"==e.target.getAttribute("id")){const e=document.getElementById("store-logo"),t=document.querySelector("#logoToko"),a=new FileReader;a.readAsDataURL(e.files[0]),a.onload=function(e){t.src=e.target.result}}else if("store-bg"==e.target.getAttribute("id")){const e=document.getElementById("store-bg"),t=document.querySelector("#bgToko"),a=new FileReader;a.readAsDataURL(e.files[0]),a.onload=function(e){$(t).css("background",`url(${e.target.result})`)}}}),document.body.addEventListener("submit",function(e){if("form-update-toko"==e.target.getAttribute("id")){e.preventDefault();const t=Array.from(document.querySelectorAll(".validation"));let a=!0;t.map((e,t)=>{let o=e.parentNode.childNodes[3];""==o.value?(a=!1,o.classList.add("is-invalid"),e.innerHTML="Harus diisi"):o.value.length<6?(a=!1,o.classList.add("is-invalid"),e.innerHTML="Minimal 6 karakter"):(o.classList.remove("is-invalid"),o.classList.add("is-valid"),e.innerHTML="")}),a&&updateToko(store.store_data.id_toko)}})}function updateToko(id_toko){let logo=document.getElementById("store-logo").files,bg=document.getElementById("store-bg").files,namaToko=$("#store-name").val(),form=new FormData;logo.length>0&&form.append("logo",logo[0]),bg.length>0&&form.append("background",bg[0]),form.append("nama_toko",namaToko),form.append("deskripsi",$("#store-deskripsion").val()),form.append("id_toko",id_toko),form.append("id_user",auth.id_user),form.append("logo_old",store.store_data.logo),form.append("bg_old",store.store_data.background),$("#btn-submit-toko").attr("disabled",!0),$.ajax({url:BASE_URL_SERVER+"/toko/update",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content"),Authorization:"Bearer "+token},data:form,method:"POST",dataType:"json",cache:!1,contentType:!1,processData:!1,success:e=>{if($("#btn-submit-toko").attr("disabled",!1),null!=e.status&&"Token is Expired"==e.status&&errorToken(),e.success){const e=Array.from(document.querySelectorAll(".validation-server"));e[0].innerHTML="",e[1].innerHTML="",Toast.fire({icon:"success",title:"Update Toko Sukses"}),dashboardToko(id_toko,!0)}},error:err=>{$("#btn-submit-toko").attr("disabled",!1);const error=err.responseJSON;if(Toast.fire({icon:"error",title:"Update Toko Error"}),"Provided token is expired."==error.message)errorToken();else{const keys=Object.keys(error),validation=Array.from(document.querySelectorAll(".validation-server"));keys.map(key=>{const value=eval("error."+key);"background"==key?validation[0].innerHTML=value[0]:"logo"==key?validation[1].innerHTML=value[0]:(validation[0].innerHTML="",validation[1].innerHTML="")})}}})}function handleDeleteProduk(){document.body.addEventListener("click",function(e){"btn-delete-produk"==e.target.getAttribute("id")?(e.preventDefault(),delete_produk(e.target.dataset.idproduk)):"btn-delete-produk-row"==e.target.getAttribute("id")&&(e.preventDefault(),delete_produk(e.target.dataset.idproduk))})}function delete_produk(e){$.ajax({url:BASE_URL_SERVER+"/produk/delete?id_produk="+e,type:"DELETE",dataType:"json",headers:{Accept:"application/json","X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content"),Authorization:"Bearer "+token},cache:!1,contentType:!1,processData:!1,success:e=>{$(".blankLoad").hide(),document.body.style.overflowY="auto",null!=e.status&&errorToken(),e.success&&(Toast.fire({icon:"success",title:"Sukses Hapus Produk"}),showTokoProduk(store.store_data.id_toko,!0))},error:e=>{$(".blankLoad").hide(),document.body.style.overflowY="auto",Toast.fire({icon:"error",title:"Error Hapus Produk"}),errorToken()}})}function getHistoryToko(e){$.ajax({url:`${BASE_URL_SERVER}/checkout/toko/${e}`,type:"GET",dataType:"JSON",error:function(e){let t=`\n        <div class="col-12 my-5">\n            <div class="row justify-content-center">\n                <img src="${BASE_URL_FILE}/img/character/INTIP.png" alt="" class="user-select-none" style="width: 500px">\n                <h2 class="text-center">No history yet</h2>\n            </div>\n        </div>\n        `;$("#historyToko").html(t)},success:function(e){if(e.success){let t="";e.data.map((e,a)=>{t+=handlerTokoCheckout(e,a+1)}),$("#history-store").html(t)}}})}function handlerTokoCheckout(e,t){return`\n      <tr>\n        <td class="product_remove">\n            ${t}\n        </td>\n        <td class="product_thumb"><a href="${BASE_URL}/detail/${e.id_produk}"><img\n                    src="${BASE_URL_FILE}/uploads/produk/${e.gambar}"\n                    alt=""></a></td>\n        <td class="product_name"><a href="${BASE_URL}/detail/${e.id_produk}">\n          ${e.nama_produk}\n        </a></td>\n        <td class="product-price">${formatter.toRupiah(e.harga)}</td>\n        <td class="product_stock">${1==e.status?"Paid Off":"Not Paid"}</td>\n      </tr>\n  `}$("#addProdukSectionReadOnly").length>0&&($("#user_permit").val("all"),allUser="all",$("input[type=radio][name=user_permitted]").change(function(){1==this.value?($("#user_permit").val(allUser),$(".section-search-user").hide()):2==this.value&&($("#user_permit").val(userPilihan),$(".section-search-user").css("display","flex"))}),$("#btn-search-user").click(function(){findUser($("#searchUser").val()),$("#searchUser").val("")}),document.body.addEventListener("click",function(e){if(e.target.classList.contains("btn-delete-user")){const t=e.target.parentNode.parentNode.parentNode,a=e.target.dataset.iduser,o=userPilihanArray.indexOf(parseInt(a));userPilihanArray.splice(o,1);let n="";userPilihanArray.length>0&&userPilihanArray.map((e,t)=>{n+=0==t?e:","+e}),userPilihan=n,$("#user_permit").val(n),t.remove()}}),document.body.addEventListener("change",function(e){if("other_img"==e.target.getAttribute("id")){const e=document.getElementById("other_img"),t=document.querySelector("#other_img_preview"),a=new FileReader;a.readAsDataURL(e.files[0]),a.onload=function(e){t.src=e.target.result}}else if("main_img"==e.target.getAttribute("id")){const e=document.getElementById("main_img"),t=document.querySelector("#main_img_preview"),a=new FileReader;a.readAsDataURL(e.files[0]),a.onload=function(e){t.src=e.target.result}}}),$("#btn-upload-produk").on("click",function(e){const t=Array.from(document.querySelectorAll(".validation"));let a=!1;t.map((t,o)=>{let n="";n=0==o||1==o?t.parentNode.childNodes[3]:2==o?t.parentNode.childNodes[3]:t.parentNode.childNodes[3].childNodes[3],e.preventDefault(),""==n.value?(n.classList.add("is-invalid"),t.innerHTML="Harus diisi"):(n.classList.add("is-valid"),t.innerHTML="",a=!0)}),a&&uploadProduk()}));